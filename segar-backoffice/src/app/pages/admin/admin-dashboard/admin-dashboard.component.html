<div class="panel-principal modern-professional">
  <!-- Header con gradiente morado -->
  <div class="panel-header enhanced">
    <div class="header-background-pattern"></div>
    <div class="header-content">
      <div class="title-section">
        <h1 class="panel-title animated">
          <span class="title-main">Panel</span>
          <span class="title-accent">Principal</span>
        </h1>
        <div class="title-indicator pulse"></div>
      </div>
      <div class="header-actions enhanced">
        <button class="btn-refresh modern-btn" (click)="actualizarDatos()" [disabled]="isRefreshing" [class.loading]="isRefreshing">
          <div class="btn-bg-effect"></div>
          <div class="btn-content">
            <i class="fas fa-sync-alt" [class.fa-spin]="isRefreshing"></i>
            <span>{{ isRefreshing ? 'Actualizando...' : 'Actualizar' }}</span>
          </div>
        </button>
        <div class="last-update-card glass-effect">
          <div class="update-icon">
            <i class="fas fa-clock pulse-slow"></i>
          </div>
          <div class="update-text">
            <span class="update-label">Última actualización</span>
            <span class="update-time">{{ ultimaActualizacion | date:'dd/MM/yyyy HH:mm' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- KPIs con tema morado -->
  <div class="kpi-container enhanced-grid">
    <div class="kpi-card primary modern-card" data-animate="slideUp" data-delay="0">
      <div class="kpi-background">
        <div class="kpi-pattern"></div>
        <div class="kpi-glow"></div>
      </div>
      <div class="kpi-content">
        <div class="kpi-header">
          <div class="kpi-icon-wrapper primary">
            <i class="fas fa-building kpi-icon"></i>
            <div class="icon-ripple"></div>
          </div>
          <span class="kpi-label">Total Tenants</span>
        </div>
        <div class="kpi-value-section">
          <div class="kpi-value counter">{{ stats[0].value }}</div>
          <div class="kpi-trend positive enhanced">
            <div class="trend-icon">
              <i class="fas fa-trending-up"></i>
            </div>
            <span class="trend-text">{{ stats[0].change }}</span>
          </div>
        </div>
      </div>
      <div class="kpi-shine"></div>
    </div>

    <div class="kpi-card warning modern-card" data-animate="slideUp" data-delay="100">
      <div class="kpi-background">
        <div class="kpi-pattern"></div>
        <div class="kpi-glow"></div>
      </div>
      <div class="kpi-content">
        <div class="kpi-header">
          <div class="kpi-icon-wrapper warning">
            <i class="fas fa-users kpi-icon"></i>
            <div class="icon-ripple"></div>
          </div>
          <span class="kpi-label">Usuarios Activos</span>
        </div>
        <div class="kpi-value-section">
          <div class="kpi-value counter">{{ stats[1].value }}</div>
          <div class="kpi-trend positive enhanced">
            <div class="trend-icon">
              <i class="fas fa-arrow-up"></i>
            </div>
            <span class="trend-text">{{ stats[1].change }}</span>
          </div>
        </div>
      </div>
      <div class="kpi-shine"></div>
    </div>

    <div class="kpi-card success modern-card" data-animate="slideUp" data-delay="200">
      <div class="kpi-background">
        <div class="kpi-pattern"></div>
        <div class="kpi-glow"></div>
      </div>
      <div class="kpi-content">
        <div class="kpi-header">
          <div class="kpi-icon-wrapper success">
            <i class="fas fa-file-alt kpi-icon"></i>
            <div class="icon-ripple"></div>
          </div>
          <span class="kpi-label">Trámites Totales</span>
        </div>
        <div class="kpi-value-section">
          <div class="kpi-value counter">{{ stats[2].value }}</div>
          <div class="kpi-trend positive enhanced">
            <div class="trend-icon">
              <i class="fas fa-rocket"></i>
            </div>
            <span class="trend-text">{{ stats[2].change }}</span>
          </div>
        </div>
      </div>
      <div class="kpi-shine"></div>
    </div>

    <div class="kpi-card danger modern-card" data-animate="slideUp" data-delay="300">
      <div class="kpi-background">
        <div class="kpi-pattern"></div>
        <div class="kpi-glow"></div>
      </div>
      <div class="kpi-content">
        <div class="kpi-header">
          <div class="kpi-icon-wrapper danger">
            <i class="fas fa-dollar-sign kpi-icon"></i>
            <div class="icon-ripple"></div>
          </div>
          <span class="kpi-label">Ingresos (MRR)</span>
        </div>
        <div class="kpi-value-section">
          <div class="kpi-value counter">{{ stats[3].value }}</div>
          <div class="kpi-trend positive enhanced">
            <div class="trend-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <span class="trend-text">{{ stats[3].change }}</span>
          </div>
        </div>
      </div>
      <div class="kpi-shine"></div>
    </div>
  </div>

  <!-- Tabla de Tenants Recientes -->
  <div class="data-section enhanced" data-animate="fadeInUp" data-delay="400">
    <div class="section-header glass-modern">
      <div class="section-title enhanced">
        <h2 class="section-main-title">Tenants Recientes</h2>
        <div class="section-accent-line"></div>
        <span class="section-subtitle">
          <i class="fas fa-building"></i>
          Últimos registros
        </span>
      </div>
      <div class="section-actions modern">
        <button (click)="navigateToTenants()" class="btn-action primary-action">
          <i class="fas fa-th-large"></i>
          <span>Ver Todos</span>
        </button>
      </div>
    </div>

    <div class="table-container modern-table">
      <table class="data-table enhanced">
        <thead>
          <tr>
            <th>Empresa</th>
            <th>NIT</th>
            <th>Plan</th>
            <th>Estado</th>
            <th>Usuarios</th>
            <th>Fecha Registro</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tenant of recentTenants" class="table-row animated">
            <td>
              <div class="tenant-info">
                <div class="tenant-avatar">
                  <i class="fas fa-building"></i>
                </div>
                <span class="tenant-name">{{ tenant.name }}</span>
              </div>
            </td>
            <td>
              <span class="tenant-nit">{{ tenant.nit }}</span>
            </td>
            <td>
              <span [class]="'badge ' + getPlanColor(tenant.plan)">
                {{ tenant.plan }}
              </span>
            </td>
            <td>
              <span [class]="'badge ' + getStatusColor(tenant.status)">
                <i class="fas fa-circle status-dot"></i>
                {{ tenant.status }}
              </span>
            </td>
            <td>
              <span class="user-count">
                <i class="fas fa-users"></i>
                {{ tenant.users }}
              </span>
            </td>
            <td>
              <span class="date-text">{{ tenant.createdAt | date:'dd/MM/yyyy' }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

